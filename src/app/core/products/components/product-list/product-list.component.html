<section>
    <div class="row g-3">
        <div class="col-md-6 col-xl-4" *ngFor="let product of products">
                <mat-card class="example-card" appearance="outlined" [ngClass]="{'highlight-card':product.fewQuantities}">
                    <mat-card-header>
                        <div mat-card-avatar style="background-size: cover; background-position: center center;" [ngStyle]="{'background-image': 'url(' + product.ProductImg + ')'}" 
                        class="example-header-image"></div>
                        <mat-card-title>{{product.ProductName}}</mat-card-title>
                    </mat-card-header>
                    <img mat-card-image [src]="product.ProductImg" alt="Product Image">
                    <mat-card-content>
                        <p class="my-1">Price: {{ product.ProductPrice | currency }}</p>
                        <p class="my-1">Available Pieces: {{ product.AvailablePieces }} Pieces</p>
                        <div class="d-flex justify-content-end">
                            <button *ngIf="product.fewQuantities" mat-stroked-button (click)="openEditQuantityModal(product,editQuantityDialog)">Edit Quantity</button>
                        </div>
                    </mat-card-content>
                </mat-card>
        </div>
    </div>
</section>


<!-- edit product modal -->
<ng-template #editQuantityDialog let-data>
    <h2 mat-dialog-title>Edit Quantity</h2>
    <mat-dialog-content>
        <mat-form-field class="w-100">
            <mat-label>Quantity</mat-label>
            <input matInput [(ngModel)]="data.quantity" type="number">
        </mat-form-field>
    </mat-dialog-content>
    <mat-dialog-actions>
        <div class="d-flex justify-content-end w-100">
            <button mat-button [mat-dialog-close]="undefined">Cancel</button>
            <button mat-button [mat-dialog-close]="data.quantity" cdkFocusInitial>Save</button>
        </div>
    </mat-dialog-actions>
</ng-template>